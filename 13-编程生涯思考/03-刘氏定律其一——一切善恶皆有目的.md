#### 善恶皆有其目的

最近下班回家的路上，带着耳机听《被讨厌的勇气》。

书中有很多道理，其中有一条很符合自己三观，那就是目的论。

我们做事，无论好坏，总有其目的。

那么，如果从目的论这个角度来思考Java语言，我们或许能够更容易的理解它。

##### 第一，Java为何而创建？

如何去看Java的发展史，你会发现它诞生的很偶然。

90年，计算机开始下沉到家用电器，而有预见性的Sun公司察觉到，那么为了争夺这个市场，他们想搞一个给家电用的通用控制系统。

这个计划由James Gosling领导，取名为“Green计划”。

###### 电子计算机发展史

第一台计算机叫“ENIAC”，（Electronic Numerical Integrator and Computer,电子数字积分器和计算机）。

宾夕法尼亚大学摩尔学院研制，目的是为火炮计算弹道，订单为10万美元，43年6月签订，46年2月才完成，错过了第二次世界大战。

约翰·莫奇利负责逻辑设计，他07年出生，29年大学毕业，32年成为物理学博士，33年教授物理学，喜欢研究气象学。因为气象学需要大量计算，因此希望找到减少求解气象方程时间的方法。

设想用利用真空管构建电子制表设备，从而代替机械制表设备

41年去摩尔学院增强电子设备的了解。因为出色被留了下来。参观了阿塔那索夫的ABC机，看了设计图和资料。

了解到学校有了计算设备的合同，主动将他关于真空管的设想提出。

从而成了ENIAC的首席顾问。

伊克特（John Presper Eckert，Jr，1919—1995）负责电路设计。

EDIAC用于原子弹爆炸突变和空军试验场，55年10月停止工作。

它不具备存储程序的能力，并不符合冯·诺依曼的设想，后续开始了EDVAC的研制，可惜53年才完成，被威尔克斯的ED-SAC先成功。



###### 那时候，流行的语言有哪些呢？

54年第一门高级语言FORTRAN诞生，它是Formula Translation，意思是“公式翻译”。

56年正式使用，到今天仍然在数值计算领域占据主要地位。

那个时候，计算机硬件性能弱，而且能够接触计算机的都是科学界最厉害的人物，计算机也是为计算数据而服务。

可以看到，哪怕第一门高级语言，虽然是超脱了汇编语言难用的特点，但设计初衷还是为了科学计算。

高级语言的概念诞生了，本身就蕴含了一个矛盾，那就是性能和便利性之间的矛盾。

没有应用程序的情况下，计算器系统本身就是一个应用程序。

58年ACM小组（美国计算机协会）和联邦德国的应用数学和力学协会（GAMM）把算法表示法综合，就是一种编程语言，名IAL（国际代数语言），后改名为Algol58

60年，艾伦·佩利发表了Algol60报告

Algol60是集大成者，将以前诸多语言进行统一规范，程序语言由技艺升级成一门科学。

佩利之前，程序设计是数学的补充，从他开始计算机科学开始独立出来。

佩利和西蒙还有纽厄尔，称为计算机系的三架马车。

63年英国剑桥大学推出了CPL（Combined Programming Langurage语言）

在Algol60基础上实现，但比较复杂

67年剑桥大学的Matin Richards对CPL进行简化，推出了BCPL.

70年贝尔实验室发明了B语言。

B语言是在BCPL基础上进一步简化，很接近硬件。然后第一个UNIX操作系统就是B语言写的。

他们的目的是贝尔实验室的肯·汤普森想玩游戏，在工作室背着老板自己为一台小型计算机开发操作系统。

初版操作系统叫UNICS(（Uniplexed Information and Computing Service,单工信息和计算服务).

B语言过于简单，功能有限，同事丹尼斯·里奇为了早点晚上游戏，加入汤普森的开发项目，合作开发Unix。

他主要帮助改造了B语言，在72年完成设计，命名为C语言，73年C语言主题完成开发。

然后，汤普森和里奇用并不成熟的C语言重写Unix。

C语言解决了适应性问题，不同类型的计算器都有自己机器语言和汇编语言。

C语言很好，简洁而结构完善，但它也有者未曾考虑到的缺点，那就是数据安全较弱，掌握起来也比较难。

**硬件成本不断降低，软件成本增高的背景下，如何缩短软件生产周期和维护效率便成了主要矛盾。**

为了应对，软件错误引发的系统报废，经过软件界的数年论战，催生了**结构化程序设计方法**。

这个方法，是用模块划分原则来提高程序可读性和易维护性。这主要是为了开发大型软件而做的基础。

**原则是：**

- 自顶而下：先考虑总体，再考虑细节。让问题一步一步具体化
- 逐步细化：对复杂问题，设计子目标作为过渡
- 模块化设计：把复杂问题，拆分成子目标，每个小目标为一个模块
- 限制使用goto语句：一切争论在74年达到妥协，Knuth发表了和稀泥的总结
  - goto有害，尽量避免
  - 但它却是也有用
  - 用不用它不是关键，怎么用才是重要的

**具体实现：**

- 顺序方式：对执行顺序分解
- 选择方式：对其中一环，并行条件进行分解
- 循环方式：确定某个部分进行重复的开始和结束

60年代末，瑞士苏黎世联邦工业大学的Niklaus Wirth教授设计并创立了Pascal，它基于Algol，是最早的结构化编程语言。

同样是在67年，挪威科学家le-Johan Dahl和Kristen Nygaard正式发布了Simula 67语言。

这是最早的面向对象编程语言。

Simula67生不逢时，再加上自己太难学，因为没能推广。

但到了70年代末，结构化语言没办法满足用户需求变化，人们需要一种更好的指导思想的时候。

面向对象技术就迎来了自己的春天。

贝尔实验室一直是通信巨头，他们一直紧紧引领着时代的进步。

它们在79年招募了Bjame Sgoustrup，他曾在剑桥大学计算机中心工作。

使用过Simula和Algol，也接触过C。

改良C语言，他自然融合了面向对象的思想，想把它搞成带类的C。取名为C++。

83年C++正式命名，经过几次的修订，98年才形成标准C++.



回到Green计划。当开发团队确定开发语言时，C++还未集成STL，标准化未正式形成。

因而C++对嵌入式开发可用的资源极其有限，而且C++使用太复杂，缺少一些关键功能。

sun公司首席科学家Bill Joy，作为一个科学怪才，轻而易举的决定在C++的基础上，自己改良一版。

但是，Gosling发现修改C++还不如自己写一个，就创造了一种全新语言：Oak

92年夏天，Green计划完成了平台的部分功能，11月转成Sun公司的全资子公司。

但平台开发完成后，面对真实的机顶盒项目时，却接连投标失败，Green项目几乎失败，成员也被调走。

直到94年互联网和浏览器的出现，Oak经过小规模改造，在秋天完成了第一个Java网页浏览器。

可惜Oak商标被注册，只能改名为Java，是喝咖啡时产生的灵感。

95年Java正式发布，其他公司都停掉了相关项目开发，转而购买Java使用权。

Java只是一种语言，想要推广需要一个强大的类库。

于是96年JDK1.0发布。

包含运行环境，jre。和开发环境JDK.

- 运行环境：
  - 核心API
  - 集成API
  - 用户界面API
  - 发布技术
  - Java虚拟机

- 开发环境：Java编译器

97年，发布JDK1.1，增加JIT（即时编译）编译器，将经常用到的指令保存在内存中，下次调用就不需要重新编译。

但是，96年Flash面世，Java在编写Applet的优势，Flash可以做的更好，成本更低。

Java始终没能找到一个准确的定位。

98年12月，Sun发布了最重要的JDK版本：Jdk1.2

将Java分成了J2EE，J2SE和J2ME

- J2ME:针对移动设备，是Java语言最初的功能
- J2SE：Java技术的核心和基础
- J2EE:为企业应用开发相关提供完整解决方案

Java将战场放在企业、桌面和移动三个领域。

JDK1.2将API拆分

- 核心API:基本API，所有Java平台都提供，就是核心类库
- 可选API：因平台不同而不同
- 特殊API：满足特殊要求而用的API

02年，JDK1.4发布，这个版本，不仅Sun公司，还有其他公司的参与。因而也最为成熟。

Java飞速发展，各个企业针对现实需求，开发了基于Java的开源框架，

- Struts2：减少运用MVC设计模型开发web应用的时间
- WebWork：同样是MVC框架
- Hibernate：全自动ORM框架
- Spring：让Java开发更加简单，面向所有Java应用

04年10月，JDK1.5发布，增加了泛型和增强for语句，可变形参、注释、自动拆箱和装箱。

06年12月，JDK1.6发布

09年4月20日，Sun被Oracl收购，Sun传奇终止。

07年11月，Google退出基于Linux开源手机操作系统，Android。

Android用Dalvik虚拟机来运行.dex文件，类似JVM。

Android使用Java开发。

11年7月28日，Java SE7发布，这次升级距离1.6版本将近5年。

引入了，二级制整数，支持字符串switch语句，菱形语法，多异常捕捉，自动关闭资源的try语句。

14年3月18日，发布了Java SE8.加了Lambda表达式，增加了大量新特性。



##### 第二，Java对手和优势

Java是面向对象编程语言，市面行流行语言还有C#,Ruby和Python

###### C#介绍和优势

微软曾经也是Java阵营的一员，但是它想在自己的项目中拓展Java功能，给Sun公司告了侵权。

微软便成了Java阵营的敌对势力，XP系统不提供Java运行时环境支持。

自己推出了.net平台，发布C#语言。

C#和Java有90%的重合，于是说Java是对C++的改进，而C#就是Java的变种。

C#的优势在于Windows的全力支持。

对于一门技术来说，他的未来并非全由技术来决定。

就好像，UNIX，Mac OS都被Windows用漂亮的界面打败。

C#由微软阵营鼓吹，Java由反微软阵营吹捧。对于我们开发者，则是那个流行，那个成熟用哪个。

###### Ruby简介和优势

Ruby是日本人松本行弘在93年开始研发，95年研发成功。

Ruby是一个纯粹的面向对象编程的语言，最大的特征是简洁。

Rails在中小型应用开发更好，Java则适合解决负复杂需求的大型企业应用。

###### Python简介和优势

Python有Guido于1989年开发，甚至比Java更早，它基于ABC教学语言。

ABC语言仅关注编程初学者，平台迁移能力弱。

Guido van Rossum在ABC开发中工作了数年，总结了其失败的原因，在掌握其精髓的前提下，对弱点进行改良，开发了Python。

这是一种面向对象的解释型编程语言。具有脚本语言中最丰富和最强的的类库。

语法简洁而清晰。

设计者认为，一个特定问题，只需要有一个最好的方法来解决。这种想法，有点想约定大于配置。

因此，Python并不是格式自由的语言，if下一行，必须向右缩进，否则编译失败。

##### 第三，Java如何运行

Java是一种高级语言。

###### 高级语言如何运行

通过，上面的语言发展史，我们知道高级语言其实就是人更容易理解的语言。

开发变的容易，执行自然就困难。

如何让机器明白，有两种做法。

- 编译型

  你写好代码，然后用编译器，一次性翻译成机器码

- 解释型

  用专门的解释器，对源代码逐行解释成机器码

Java拥有两种特征，先编译，后解释。

我们写.java文件，编译成.class字节码文件，然后JVM解释器执行字节码。

JVM是一个虚拟计算机。

程序设计的一大真理：**有数量问题你就加一层**

各个平台不一样，那么那一层一样的，我的程序不对接你的系统，而对接专门的虚拟机。

开发者不用关心虚拟机怎么实现，只需要写自己的业务代码，而这行代码就能在所有平台上运行。













